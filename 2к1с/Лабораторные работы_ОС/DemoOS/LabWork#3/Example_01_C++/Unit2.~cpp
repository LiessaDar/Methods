//---------------------------------------------------------------------------
//Демонстрационный проэкт к лабораторной работе №3
//ПЕРВАЯ ПРОГРАММА
//---------------------------------------------------------------------------
//ЗАДАНИЕ: создать программу, которая начинает запись в файл, вторая
//программа ожидает завершения процесса записи, после чего считывает
//содержимое файла
//---------------------------------------------------------------------------
//Подключаем необходимые библиотеки
#include "windows.h"
#include "fstream.h"
#include "iostream.h"
//------Главная функция программы--------------------------------------------
int main() {
  //открываем существующий мьютекс "WriteData"
  HANDLE mtx = OpenMutex(MUTEX_ALL_ACCESS, FALSE, "WriteData");

  //выводим сообщение о необходимости подождать
  cout << "Wait !!!! Write File Data Proccess " << endl;

  //ожидаем освобождения мьютекса "WriteData"
  WaitForSingleObject(mtx, INFINITE);

  //выполням считывание данных из файла
  ifstream ifs("file_01.txt");
  char buffer[100];
  ifs >> buffer;
  cout << "Read File Data  -  " << endl << buffer << endl;

  //удаляем мьютекс
  CloseHandle(mtx);

  //завершаем выполнение программы
  return 0;
}
//-------Конец главной функции программы-------------------------------------

